---
title: "Real Property Tax in Baltimore"
subtitle: "Flaws in the current SDAT assessments of land"
author: "Joshua Spokes"
---

```{r pull-city-data, cache = TRUE}
# Load necessary libraries
library(httr)
library(jsonlite)
library(sf)
library(pbapply)
library(stringr)
library(dplyr)

# I am so angry that this works
baltimore <- st_read("https://geodata.baltimorecity.gov/egis/rest/services/CityView/Realproperty_OB/FeatureServer/0/query?returnGeometry=true&where=1=1&outFields=*&f=geojson")

baltimore$PIN <- as.character(baltimore$PIN)


```

```{r initial analysis}
initial_analysis_sample = c("1783017A",
                            "1783017",
                            "1784040",
                            "1784036",
                            "1784035",
                            "1784034",
                            "1784033",
                            "1784032",
                            "1784031",
                            "1784030",
                            "1784029",
                            "1784028",
                            "1784027",
                            "1784026",
                            "1784025",
                            "1784024",
                            "1784023",
                            "1784022",
                            "1784021",
                            "1784020",
                            "1784019",
                            "1784018",
                            "1784017",
                            "1784016",
                            "1784061",
                            "1784060",
                            "1784059",
                            "1784058",
                            "1784057",
                            "1784056",
                            "1784055",
                            "1784054",
                            "1784053",
                            "1784052")

filter(baltimore,
       PIN %in% initial_analysis_sample) -> initial_analysis_lots

filter(baltimore,
       str_detect(PIN, "^1784")) -> bk_rofo_block
```
